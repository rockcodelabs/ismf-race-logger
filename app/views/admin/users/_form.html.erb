<%= form_with(model: [:admin, user], class: "space-y-6") do |form| %>
  <% if user.errors.any? %>
    <div class="flash-alert">
      <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      <div>
        <h3 class="font-medium">Please fix the following errors:</h3>
        <ul class="mt-1 text-sm list-disc list-inside">
          <% user.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    </div>
  <% end %>

  <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
    <!-- Name -->
    <div>
      <%= form.label :name, class: "form-label" %>
      <%= form.text_field :name, class: "form-input", placeholder: "John Doe", required: true %>
    </div>

    <!-- Email -->
    <div>
      <%= form.label :email_address, "Email", class: "form-label" %>
      <%= form.email_field :email_address, class: "form-input", placeholder: "john@example.com", required: true %>
    </div>

    <!-- Password -->
    <div>
      <%= form.label :password, class: "form-label" %>
      <%= form.password_field :password, class: "form-input", placeholder: user.new_record? ? "Enter password" : "Leave blank to keep current", required: user.new_record? %>
      <% unless user.new_record? %>
        <p class="mt-1 text-xs text-ismf-gray">Leave blank to keep the current password.</p>
      <% end %>
    </div>

    <!-- Password Confirmation -->
    <div>
      <%= form.label :password_confirmation, class: "form-label" %>
      <%= form.password_field :password_confirmation, class: "form-input", placeholder: "Confirm password", required: user.new_record? %>
    </div>
  </div>

  <!-- Admin toggle -->
  <div class="flex items-start gap-3">
    <div class="flex items-center h-6">
      <%= form.check_box :admin, class: "h-5 w-5 rounded border-gray-300 text-ismf-red focus:ring-ismf-red" %>
    </div>
    <div>
      <%= form.label :admin, "Administrator", class: "font-medium text-ismf-navy" %>
      <p class="text-sm text-ismf-gray">Grant full administrative access to this user.</p>
    </div>
  </div>

  <!-- Actions -->
  <div class="flex items-center justify-end gap-3 pt-4 border-t border-gray-200">
    <%= link_to "Cancel", admin_users_path, class: "btn-outline" %>
    <%= form.submit user.new_record? ? "Create User" : "Update User", class: "btn-primary cursor-pointer" %>
  </div>
<% end %>